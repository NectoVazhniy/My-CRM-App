<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Смена пароля</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="form-box">
    <h2>Сменить пароль</h2>

    <!-- Сообщение от сервера -->
    {% if message %}
        <p style="color: red;"><strong>{{ message }}</strong></p>
    {% endif %}

    <!-- Сообщение от JS -->
    <p id="js-message" style="color: red;"></p>

    <form method="POST" onsubmit="return validatePasswords()">
        <label>Старый пароль:</label><br>
        <input type="password" name="old_password" required minlength="6"><br><br>

        <label>Новый пароль:</label><br>
        <input type="password" id="new_password" name="new_password" required minlength="6"><br><br>

        <label>Повторите новый пароль:</label><br>
        <input type="password" id="confirm_password" name="confirm_password" required minlength="6"><br><br>

        <button type="submit">Сменить</button>
    </form>

    <p><a href="/clients">Назад</a></p>

    <script>
    function validatePasswords() {
        const newPassword = document.getElementById('new_password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        const jsMessage = document.getElementById('js-message');

        if (newPassword !== confirmPassword) {
            jsMessage.textContent = "Новый пароль и его подтверждение не совпадают.";
            return false;
        }

        jsMessage.textContent = ""; // очищаем, если всё ок
        return true;
    }
    </script>
    </div>
</body>
</html>


